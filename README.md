# log_analyse
log_analyse.sh

这个脚本的主要作用是整理请求成功且带有关键词的nginx日志，它可以节约我们分析日志的所用的时间。

Introduce

1.系统环境kail. 脚本环境shell

2.sql注入攻击的关键字日志提取，包含盲注关键字，报错注入常用关键字，延时注入关键字联合查询关键词等漏洞类型。

3.xss攻击关键词日志提取，包含常用的xss攻击字符，伪协议绕过字符，on事件触发的常用函数，执行xss攻击代码常用的函数，编码绕过的情况等。

4.常见的一些漏洞，像文件遍历/下载，代码执行，命令执行，木马文件，扫描器关键字，配置文件，日志文件，压缩文件的下载关键词，resin关键字，当然你也可以自己增加一些关键词。

5.统计访问次数最多ip的次数和值，可用于爆破类的请求和刷评论等操作的定位。

6.统计访问次数最多的请求接口的url的次数和值，作用同上。

7.统计具有攻击行为的ip的次数和值，作用是统计出带有攻击关键词的ip和个数。可用户定位攻击ip。

8.统计请求时长超过3秒的用户，主要统计延时注入和某个接口被拒绝服务攻击。


Usage

Usage: ./log_analyse.sh.sh [options] [FILE]
Options:
xxx.sh xss    [FILE] 获取成功访问请求中带有xss关键字的日志列表
xxx.sh sql    [FILE] 获取成功访问请求中带有sql关键字的日志列表
xxx.sh other  [FILE] 获取成功访问请求中除xss和sql其他漏洞的日志列表
xxx.sh act1   [FILE] 统计带有攻击关键词的次数和对应恶意ip地址
xxx.sh act2   [FILE] 统计访问最多的请求接口并显示次数和对应接口
xxx.sh act3   [FILE] 统计访问最多的ip并显示次数和对应ip
xxx.sh act4   [FILE] 统计服务器响应时长超过3秒的日志
